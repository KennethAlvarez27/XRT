include $(RDI_MAKEROOT)/top.mk

include $(RDI_MAKEROOT)/platform.mk
ifeq ($(RDI_OS),gnu/linux)

# LLVM for LLVM_INCDIR
include $(RDI_SRCROOT)/products/sdx/ocl/rdi/llvm.mk

MYINCLUDES := $(LLVM_INCDIR) \
 $(RDI_SRCROOT)/products/hls/src/hwsyn/pass/opencl/include \
 $(RDI_SRCROOT)/products/sdx/ocl/src/include/1_2

MYCFLAGS := $(LLVM_CXXFLAGS) -DINCLUDE_HLS_SRC -Wall -fvisibility=hidden

OBJS_PROPAGATE := no

CPP_SUFFIX := .cpp

include $(RDI_MAKEROOT)/objs.mk

X86_CLANG_LIBRARIES := -L$(RDI_SRCROOT)/products/hls/ext/llvm/hls_3.1/$(RDI_PLATFORM)/lib.g \
 -lclangFrontendTool \
 -lclangFrontend \
 -lclangDriver \
 -lclangSerialization \
 -lclangCodeGen \
 -lclangParse \
 -lclangSema \
 -lclangStaticAnalyzerFrontend \
 -lclangStaticAnalyzerCheckers \
 -lclangStaticAnalyzerCore \
 -lclangAnalysis \
 -lclangARCMigrate \
 -lclangRewrite \
 -lclangAST \
 -lclangLex \
 -lclangBasic \
 -lclangHLS \
 -lclangEdit

SHLIBRARIES += products/hls/LLVM-3.1

EXEC_NAME := generateclc
EXEC_OBJS := generateclc generateclc_c

MYLDLIBS += $(X86_CLANG_LIBRARIES)

include $(RDI_MAKEROOT)/exec.mk

# Release the executable
RELEASE_EXECS := $(EXEC_NAME)
RELEASE_TYPE := internal

include $(RDI_MAKEROOT)/release.mk

endif # ($(RDI_OS),gnu/linux)

include $(RDI_MAKEROOT)/bottom.mk
